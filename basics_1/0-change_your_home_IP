#!/usr/bin/env bash
# Script to update /etc/hosts to change localhost and facebook.com resolutions

# Check if the script is run as root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi

# Backup the current /etc/hosts file
cp /etc/hosts /etc/hosts.backup

# Make sure 'localhost' is resolved to 127.0.0.2, or change it
if grep -q "127.0.0.1\s\+localhost" /etc/hosts; then
  sed -i 's/127.0.0.1\s\+localhost/127.0.0.2 localhost/' /etc/hosts
else
  echo "127.0.0.2 localhost" >> /etc/hosts
fi

# Remove any existing facebook.com entry
sed -i '/facebook.com/d' /etc/hosts

# Add new entry for facebook.com
echo "8.8.8.8 facebook.com" >> /etc/hosts

echo "Changes applied. You can check by running 'ping localhost' or 'ping facebook.com'."
